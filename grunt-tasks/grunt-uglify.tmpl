module.exports = function(grunt) {
  grunt.config('uglify', {
    options: {
      screwIE8: true,
      sourceMap: false,
      ASCIIOnly: true,
      compress: {
        drop_console: true,
        cascade: true,
        join_vars: true,
        if_return: true,
        conditionals: true,
        loops: true,
        booleans: true,
        properties: true,
        sequences: true,
        drop_debugger: true,
        unused: true,
      },
    },
    dependencies: {
      files: {
        'deploy/content/javascript/argos-dependencies.js': [
          'libraries/l20n/l20n.js',
          'libraries/Simplate.js',
          'libraries/canvas2image.js',
          'libraries/sdata/sdata-client-dependencies-debug.js',
          'libraries/sdata/sdata-client-debug.js',
          'libraries/pagejs-1.6.1/page.js',
          'libraries/pouchdb/pouchdb-6.1.2.js',
          'libraries/deep-diff/deep-diff-0.2.0.min.js',
          'deps/babel-polyfill/polyfill.min.js',
          'deps/moment/moment-with-locales.js',
          'deps/rx-lite/rx.lite.js',
          'deps/icrm-js-common/common.bundle.js',
          'deps/icrm-js-customization/customization.bundle.js',
          'deps/icrm-js-services/icrm-js-services.js',
          'deps/redux/redux.min.js',
          'deps/jquery/jquery.js',
          'deps/sohoxijs/sohoxi.js',
          'libraries/chartjs/jquery/Chart.min.js',
        ],
      },
    },
    amd_dependencies: {
      files: {
        'deploy/content/javascript/argos-amd-dependencies.js': [

        ],
      },
    },
    sdk: {
      files: {
        'deploy/content/javascript/argos-sdk.js': [
          <% files.forEach(function(file, i) { %>'<%- file.folderName.replace('../src', 'src') %>/<%- file.fileName %>',
          <%});%>
        ],
      },
    },
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
};
